<!DOCTYPE html>
<meta charset="utf-8">
<html lang="en">
{% load compress %}
{% load staticfiles %}
{% load html_tags %}
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}COPO - Collaborative Open Plant Omics{% endblock %}</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="{% static 'copo/css/bootstrap/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'copo/css/bootstrap/bootstrap-dialog.css' %}">
    <link rel="stylesheet" href="{% static 'copo/css/bootstrap/dropdowns-enhancement.css' %}">
    <link rel="stylesheet" href="{% static 'copo/css/bootstrap/bootstrap-theme.css' %}">
    <link rel="stylesheet" href="{% static 'copo/bootstrap_switch/css/bootstrap-switch.css' %}">
    <link rel="stylesheet" href="{% static 'copo/fuelux/css/fuelux.css' %}">
    <link rel="stylesheet" href="{% static 'copo/css/copo/style.css' %}">
    <link rel="stylesheet" href="{% static 'copo/css/copo/menu.css' %}">
    <link rel="stylesheet" href="{% static 'copo/autocomplete_js/autocomplete.css' %}">


    <link rel="shortcut icon" href="{% static 'copo/img/COPO_icon.png' %}"/>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="{% static 'copo/css/awesome/css/font-awesome.css' %}">
    <link rel="stylesheet" href="{% static 'copo/css/awesome/css/awesome-bootstrap-checkbox.css' %}">

    <!-- Selectize Components -->
    <link rel="stylesheet" href="{% static 'copo/css/selectize/selectize.css' %}">

    <!-- Google Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Quattrocento+Sans' rel='stylesheet' type='text/css'>
    <!-- Additional stylesheets -->
    {#    <link rel="stylesheet" href="{% static 'copo/css/copo/smart_table.css' %}">#}
    {% block stylesheet_block %}{% endblock %}


    <!--[if lt IE 9]>
    <script src="{% static 'copo/js/jquery-1.11.1.min.js' %}"></script>
    <![endif]-->
    <!--[if gte IE 9]><!-->
    <script src="{% static 'copo/js/jquery-2.1.4.min.js' %}"></script>
    <script src="{% static 'copo/js/jquery-ui.min.js' %}"></script>
    <!--<![endif]-->

    <script src="{% static 'copo/js/jquery.cookie.js' %}"></script>
    <script src="{% static 'copo/js/serialize_form_json.js' %}"></script>
    <script src="{% static 'copo/js/bootstrap.js' %}"></script>
    <script src="{% static 'copo/js/bootstrap-dialog.js' %}"></script>
    <script src="{% static 'copo/js/dropdowns-enhancement.js' %}"></script>
    <script src="{% static 'copo/js/selectize.js' %}"></script>
    <script src="{% static 'copo/bootstrap_switch/js/bootstrap-switch.js' %}"></script>
    <script src="{% static 'copo/fuelux/js/fuelux.js' %}"></script>
    <script src="{% static 'copo/validator1000hz/validator.min.js' %}"></script>

    <script src="{% static 'copo/js/base.js' %}"></script>

    <!-- Additional javascripts -->
    {% block js_block %}{% endblock %}

    <link rel="stylesheet" href="{% static 'copo/css/jquery/jquery-ui.min.css' %}">
    <!-- Date picker components -->
    <link rel="stylesheet" href="{% static 'copo/css/datepicker/jquery.datepick.css' %}">
    <script src="{% static 'copo/js/datepicker/jquery.plugin.js' %}"></script>
    <script src="{% static 'copo/js/datepicker/jquery.datepick.js' %}"></script>

    <!-- EasyUI components -->
    <link rel="stylesheet" href="{% static 'copo/css/easyui/themes/default/easyui.css' %}">
    <link rel="stylesheet" href="{% static 'copo/css/easyui/themes/icon.css' %}">
    <script src="{% static 'copo/js/easyui/jquery.easyui.min.js' %}"></script>

    <!-- DataTables components -->
    <link rel="stylesheet" href="{% static 'copo/datatables/css/jquery.dataTables.css' %}">
    <link rel="stylesheet" href="{% static 'copo/datatables/css/dataTables.bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'copo/datatables/css/select.dataTables.min.css' %}">
    <link rel="stylesheet" href="{% static 'copo/datatables/css/buttons.dataTables.min.css' %}">
    <link rel="stylesheet" href="{% static 'copo/datatables/css/buttons.bootstrap.min.css' %}">

    <script src="{% static 'copo/datatables/js/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'copo/datatables/js/dataTables.bootstrap.min.js' %}"></script>
    <script src="{% static 'copo/datatables/js/dataTables.select.min.js' %}"></script>
    <script src="{% static 'copo/datatables/js/dataTables.buttons.min.js' %}"></script>
    <script src="{% static 'copo/datatables/js/buttons.bootstrap.min.js' %}"></script>
    <script src="{% static 'copo/autocomplete_js/autocomplete.js' %}"></script>

    <script src="{% static 'copo/autocomplete_js/autocomplete.js' %}"></script>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    {% compress css %}
        <link rel="stylesheet" type="text/scss" href="{% static 'copo/css/copo/colors/sass.scss' %}"/>
    {% endcompress %}

    <script>

        $(document).ready(function () {
            $("#global_search_form").submit(function (event) {
                console.log($("#global_search_term").val());
                event.preventDefault();

                $('.copo-search-bar').toggleClass("copo-search-bar-open");
                $('.copo-search-icon').toggleClass("copo-search-icon-open");
            });

            $("#global_status_link, #sub_global_status_link").on('click', function (event) {
                event.preventDefault();
                $('#global_status_message').toggle();
            });

            $('.copo-search-box .copo-icon-magnifier').on('click', function (e) {
                $("#global_search_term").val("");

                $('.copo-search-bar').toggleClass("copo-search-bar-open");
                $('.copo-search-icon').toggleClass("copo-search-icon-open");
                e.preventDefault();
            });


            $('#toggle_global_links, #sub_toggle_global').on('click', function (event) {
                event.preventDefault();
                toggle_global_side_links();
            });
        });


        AutoComplete({
            post: do_post
        })


        function toggle_global_side_links() {
            var effect = 'slide';
            var options = {direction: "left"};
            var duration = 400;

            $('#copo_global_links').toggle(effect, options, duration);
        }

        function close_side_links() {
            if (($('#copo_global_links').is(":visible"))) {
                $('#copo_global_links').hide(400);
            }
        }


        function do_post(result, response, custParams) {
            response = JSON.parse(response);
            var properties = Object.getOwnPropertyNames(response);
            //Try parse like JSON data

            var empty,
                    length = response.length,
                    li = domCreate("li"),
                    ul = domCreate("ul");
            //Reverse result if limit parameter is custom
            if (custParams.limit < 0) {
                properties.reverse();
            }


            for (var item in response.highlighting) {
                try {
                    li.innerHTML = response.highlighting[item].label_autosuggest[0];

                    $(li).attr("data-autocomplete-value", response.highlighting[item].label_autosuggest[0].replace('<b>', '').replace('</b>', '') + ' - ' + item);

                    ul.appendChild(li);
                    li = domCreate("li");
                }
                catch (err) {
                    console.log(err)
                }
            }
            if (result.hasChildNodes()) {
                result.childNodes[0].remove();
            }

            result.appendChild(ul);
        }


    </script>

</head>

<body>

<!-- hidden fields -->
<input type="hidden" id="elastic_search_ajax" value="{% url 'copo:ajax_search_ontology' ontology_names='999' %}"/>


<div class="container header-level-1">
    <div class="row" style="color:white;">
        <div class="col-sm-3 col-md-3 col-lg-3">
            <div id="toggle_global_links">
                <i style="padding-left:3px;" class="fa fa-align-justify fa-lg" aria-hidden="true"></i>
                <br/><span style="padding-right: 5px; font-size: 10px;">menu</span>
            </div>
            <div id="copo_logo_links">
                <a href="{% url 'copo:index' %}">
                    <img src="{% static "copo/img/logo7-white-leaves-trans.png" %}" style="height:50px;"/>
                </a>
            </div>
        </div>
        <div class="col-sm-9 col-md-9 col-lg-9">
            <div style="margin-top: 10px;">
                <ul class="nav nav-pills copo-custom-nav-1 pull-right">
                    <li style="margin-top: 6px; margin-right: 15px;">
                        <form id="global_search_form" class="copo-search-box pull-right" method="post"><span
                                class="copo-icon-magnifier copo-search-icon"><i class="fa fa-search"></i></span>

                            <input type="text" id="global_search_term" class="copo-search-bar"
                                   placeholder="Search" value=""/>
                        </form>
                    </li>
                    <li>
                        <a id="global_status_link" href="#">
                            <i style="padding-right: 5px;" class="fa fa-cloud-upload" aria-hidden="true"></i>Status
                            <span class="badge">{{ num_issues }}</span>
                        </a>
                        <div id="global_status_message">
                            <div style="margin-bottom: 20px;">
                                <span id="sub_global_status_link" style="cursor:hand; cursor:pointer; color:#000000;"
                                      title="close">
                                <i class="fa fa-times-circle pull-right"></i></span>
                                </span>
                            </div>

                            {% for issue in issue_description_list %}
                            <div class="copo-status-item">
                                {% autoescape off %}{{ issue }}{% endautoescape %}

                            </div>
                            {% empty %}
                            <div class="copo-status-item">
                                Profile up to date.
                            </div>
                            {% endfor %}

                            <div class="copo-status-item">Issue no. 2</div>
                            <div class="copo-status-item">Issue no. 3</div>
                        </div>
                    </li>
                    <li>
                        <a href="{% url 'copo:index' %}">
                            <i style="padding-right: 5px;" class="fa fa-bell" aria-hidden="true"></i>Alerts <span
                                class="badge"></span></a>
                    </li>
                    <li>
                        <a href="{% url 'copo:index' %}"><i style="padding-right: 5px;" class="fa fa-cogs"></i>Settings</a>
                    </li>
                    <li>
                        <i style="padding-right: 20px;">&nbsp;</i>
                    </li>
                    <li>
                        <a href="#" id="dropdownMenu1" data-toggle="dropdown"
                           aria-expanded="true">

                            {% if user.is_authenticated %}
                                <i style="padding-right: 5px;" class="fa fa-user" aria-hidden="true"></i>
                                {{ user }}
                            {% else %}
                                <i style="padding-right: 5px;" class="fa fa-sign-in" aria-hidden="true"></i>
                                Login
                            {% endif %}

                        </a>
                        {% if user.is_authenticated %}
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                                <li role="presentation">
                                    <a role="menuitem" tabindex="-1" href="{% url 'copo:view_orcid_profile' %}">Orcid
                                        Profile</a>
                                </li>
                                <li role="presentation"><a role="menuitem" tabindex="-1"
                                                           href="/accounts/logout/">Logout</a>
                                </li>

                            </ul>
                        {% else %}
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                                <li role="presentation"><a role="menuitem" tabindex="-1"
                                                           href="/copo/login/">Login</a>
                                </li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Register</a>
                                </li>

                            </ul>
                        {% endif %}
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

{% block page_banner %}
    <!-- fiter tag to check if there are partial submissions -->
    {% comment %}
        {{ partial_submissions|partial_submission_banner }}
    {% endcomment %}
{% endblock %}

<div class="container header-level-2">
    <div style="position: relative; height: 100%;">
        <div class="row">
            <div id="copo_global_links" class="col-sm-2 col-md-2 col-lg-2">
                <div style="position: relative; margin-top: 70px; min-height: 70%; overflow: auto;">
                    <div style="margin-bottom: 20px;">
                        <span id="sub_toggle_global" style="cursor:hand; cursor:pointer; " title="close">
                        <i class="fa fa-times-circle pull-right"></i></span>
                    </div>
                    <ul class="nav nav-pills nav-stacked copo-side-nav">
                        {% block pill_items_sidebar_local %}
                        {% endblock pill_items_sidebar_local %}
                        {% block pill_items_sidebar %}
                            <li>
                                <a href="{% url 'copo:index' %}">
                                    <i class="fa fa-list fa"></i>
                                    <span class="icon_text">Profiles</span>
                                </a>
                            </li>
                            <li>
                                <a>
                                    <i class="fa fa-area-chart"></i>
                                    <span class="icon_text">Accessions</span>
                                </a>
                            </li>
                            <li>
                                <a>
                                    <i class="fa fa-file-o"></i>
                                    <span class="icon_text">Publications</span>
                                </a>
                            </li>
                            <li>
                                <a>
                                    <i class="fa fa-link"></i>
                                    <span class="icon_text">References</span>
                                </a>
                            </li>
                        {% endblock pill_items_sidebar %}
                    </ul>
                </div>
            </div>
            <div id="global_work_area" class="col-sm-12 col-md-12 col-lg-12 pull-right"
                 style="transition: all 0.4s ease 0s; margin-top: 70px;">
                {% block browse_header_block %}
                {% endblock %}

                <div class="global-page-title">
                    {% block page_tile %}
                        Page Title Goes Here
                    {% endblock page_tile %}

                </div>

                {% block content %}
                {% endblock content %}
            </div>
        </div>
    </div>
</div>

</body>
</html>
